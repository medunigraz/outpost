{% extends 'outpost/base.html' %}
{% load static %}
{% load imagekit %}

{% block content %}
<div class="page-header">
  <h1>
    {{ object }}
    {% if object.enabled %}
      {% if object.online %}
      <span class="label label-success">Online</span>
      {% else %}
      <span class="label label-default">Offline</span>
      {% endif %}
      {% if object.provision %}
      <span class="label label-primary">Provisioning</span>
      {% endif %}
    {% else %}
    <span class="label label-default">Disabled</span>
    {% endif %}
  </h1>
</div>
{% if object.epiphansource_set.exists %}
<h2>Preview of sources</h2>
<div class="row">
  {% for s in object.epiphansource_set.all %}
  <div class="col-xs-6 col-md-3">
    <a class="thumbnail" href="{{ s.preview.url }}" data-toggle="modal" data-target="#previewModal" data-remote="false">
      {% generateimage 'video:source_thumbnail' source=s.preview %}
    </a>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="alert alert-info" role="alert">
  No preview images available because of missing sources.
</div>
{% endif %}
<div class="modal fade" id="previewModal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <img>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block style %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'video/preview.scss' %}" type="text/x-scss" charset="utf-8">
{% endblock %}

{% block script %}
  {{ block.super }}
  <script src="{% static 'video/preview.js' %}"></script>
{% endblock %}
